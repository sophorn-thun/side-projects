<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login Suite</title>
  <link rel="stylesheet" href="styles.css">
  <script src="scripts/app.js" type="module"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>    
  <script>
    function loginFromGoogle(data) {
        Auth.loginFromGoogle(data)
    }
</script>

</head>

<body>
  <header>
    <div class="header">
      <p>LoginSuite</p>
      <div class="header-img">
        <img src="./images/header.svg" alt="Unlock Illustration">
      </div>
    
    </div>
  </header>

  <main>
      <section class="home" id="home">
          <h2>Welcome to Login Suite!<h2>
          <section class="logged_out">
              <p>You are currently logged out.</p>
              <p><a href="/login" class="navlink">Log in here</a></p>
          </section>  
      </section>

      <section class="page logged_in">
        <p>You are currently logged in as <span class='account_name' class="navlink"></span>.</p>
        <p>You can see details of your <a href='/account' class="navlink">Account</a></p>
      </section> 

      <section class="page register"  id="register">
          <h1>Register</h1>
          <form id="formRegister" onsubmit="Auth.register(event)">
            <fieldset>
                <label for="register_name">Name</label>
                <input placeholder="Name" id="register_name"
                        required autocomplete="name">
                <label for="register_email">E-mail (your username)</label>
                <input placeholder="Email" id="register_email" 
                        required type="email" autocomplete="username">
                
                <label for="register_password">Your Password</label>
                <input type="password" id="register_password"
                        required autocomplete="new-password">
            </fieldset>
        
            <button>Register Account</button>
        </form>
      </section>

      <section class="page login" id="login">
          <h1>Log In</h1>

          <form id="formLogin" onsubmit="Auth.login(event)">
            <fieldset>
                <label for="login_email">E-mail</label>
                <input placeholder="email" id="login_email"
                    required autocomplete="webauthn username">      
                <section id="login_section_password">              
                    <label for="login_password">Password</label>
                    <input type="password" id="login_password"
                        autocomplete="webauthn current-password">
                </section>                                      
                <section hidden id="login_section_webauthn">
                    <a href="#" class="navlink" >Log in with your Authenticator</a> 
                </section>                                      
            </fieldset>
            <button>Continue</button>
        
            <p>
                <a href="/register" class="navlink">Register here for new users</a> 
            </p>  
            
            <fieldset>
              <div id="g_id_onload"
                  data-client_id="651170163162-qhqedlqc90nqpsvibf9blu1f7moe93ho.apps.googleusercontent.com"
                  data-context="signin"
                  data-ux_mode="popup"
                  data-callback="loginFromGoogle"
                  data-auto_select="true"
                  data-itp_support="true">
              </div>

              <div class="g_id_signin"
                  data-type="standard"
                  data-shape="pill"
                  data-theme="filled_blue"
                  data-text="continue_with"
                  data-size="large"
                  data-logo_alignment="left">
              </div>
            </fieldset>
        </form>       
      </section>

      <section class="page account"  id="account">
          <h1>My Account detail:</h1>
          <dl>
              <dt>Name </dt>
              <dd class="account_name"></dd>
              <dt>Email </dt>
              <dd class="account_username"></dd>
          </dl>
          <button onclick="Auth.logout()">Log out</button>
      </section>
    </main>
</body>
</html>